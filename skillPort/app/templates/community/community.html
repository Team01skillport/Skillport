{% extends "base.html" %} {% block title %}コミュニティー{% endblock %} {% block
  content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/community.css') }}">
<!-- reccomended container ------------------------------------------ -->
<div class="reccomended_and_feed">

  <!-- 左側：おすすめ動画 -->
<div class="reccomended">
    <h2>おすすめ動画</h2>

    <a class="video_card" href="{{ url_for('lesson_video.video_player', video_id=1) }}" aria-label="動画1の詳細を開く">
      <img src="../static/media/1.jpeg" alt="動画1">
      <h3>タイトル</h3>
      <p>しょうごくんと楽しくイラストレーションを学びましょう！</p>
    </a>

    <a class="video_card" href="{{ url_for('lesson_video.video_player', video_id=2) }}" aria-label="動画2の詳細を開く">
      <img src="../static/media/1.jpeg" alt="動画2">
      <h3>タイトル</h3>
      <p>しょうごくんと楽しく機能を学びましょう！</p>
    </a>

    <a class="video_card" href="{{ url_for('lesson_video.video_player', video_id=3) }}" aria-label="動画3の詳細を開く">
      <img src="../static/media/1.jpeg" alt="動画3">
      <h3>タイトル</h3>
      <p>しょうごくんと楽しくプログラミングを学びましょう！</p>
    </a>

    <a class="video_card" href="{{ url_for('lesson_video.video_player', video_id=4) }}" aria-label="動画4の詳細を開く">
      <img src="../static/media/1.jpeg" alt="動画4">
      <h3>タイトル</h3>
      <p>しょうごくんと楽しくフィットネスを学びましょう！</p>
    </a>
  </div>

  <!-- 右側：投稿フィード -->
  <div class="feed">
    <h2>投稿フィード</h2>
    <div class="post-list">
      {% for post in all_posts %}
      <div class="post">
        <div class="user">
          <img class="avatar" src="{{url_for('static', filename='media/user' + post.profile_icon)}}" alt="ユーザーアイコン">
          <a href="{{url_for('auth.view_profile', user_id=post.user_id)}}" class="username">{{post.user_name}}</a>
        </div>
        {% if post.post_media != None %}
        <img src="{{post.post_media}}">メディアがあればここ</img>
        {% endif %}
        <p>{{post.post_text}}</p>
        <p>{{post.post_update_date}}</p>
        {% if post.user_id == user_id %}
        <div class="actions">
          <button>編集</button>
        </div>
        {% endif %}
        <hr>
      </div>
      {% endfor %}
    </div>

      <div class="new-post">
          <form action="{{url_for('community.upload_post')}}" class="upload_post" method="post">

        <!-- バグるから一旦コメント↓ -->
        <!-- <img class="user_icon" src="{{url_for('static', filename='media/user')}}" alt="ユーザーアイコン"> -->
          <div class="input-area">
            <div class="textbox">
              <div class="attachment"></div>
              <input class="text" type="text" name="post_text" placeholder="テキストを追加">
            </div>
            <div class="buttons">
              <button class="add">＋</button>
              <button class="send">▶</button>
            </div>
            <input class="filepick" type="file" accept="image/*,video/*" hidden>
            <button type="submit">送信</button>
          </div>
        </form>
      </div>
  </div>

  <div class="reccomended reccomended--right">
    <h2>おすすめ商品</h2>

    <a class="video_card" href="trend-1.html" aria-label="トレンド1の詳細を開く">
      <img src="../static/media/1.jpeg" alt="トレンド1">
      <h3>タイトルA</h3>
      <p>今みんなが見ている投稿をチェックしよう。</p>
    </a>

    <a class="video_card" href="trend-2.html" aria-label="トレンド2の詳細を開く">
      <img src="../static/media/1.jpeg" alt="トレンド2">
      <h3>タイトルB</h3>
      <p>ホットな話題をまとめてキャッチ。</p>
    </a>

    <a class="video_card" href="trend-3.html" aria-label="トレンド3の詳細を開く">
      <img src="../static/media/1.jpeg" alt="トレンド3">
      <h3>タイトルC</h3>
      <p>学びにも息抜きにもグッド。</p>
    </a>
  </div>
</div>
<!-- reccomended container ------------------------------------------ -->

<!--編集popup --------------------------------------- -->
<div id="editModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal__overlay" data-close="true"></div>

  <div class="modal__panel" role="document">
    <header class="modal__header">
      <h3>投稿を編集</h3>
      <button class="modal__close" type="button" aria-label="閉じる" data-close="true">×</button>
    </header>

    <main class="modal__body">
      <label class="modal__label" for="editText">テキスト</label>
      <textarea id="editText" class="modal__textarea" rows="5" placeholder="テキストを入力"></textarea>

      <div class="modal__media">
        <div class="modal__media-top">
          <label class="modal__label">メディア</label>
          <div class="modal__media-actions">
            <button id="btnPickMedia" class="btn btn--ghost" type="button">画像 / 動画を選択</button>
            <button id="btnRemoveMedia" class="btn btn--ghost" type="button">メディアを削除</button>
            <input id="editFile" type="file" accept="image/*,video/*" hidden>
          </div>
        </div>

        <div id="mediaPreview" class="modal__preview">
          <!-- 現在の画像/動画 or 新しい選択がここに表示 -->
        </div>
      </div>
    </main>

    <footer class="modal__footer">
      <button class="btn btn--ghost" type="button" data-close="true">キャンセル</button>
      <button id="btnSaveEdit" class="btn btn--primary" type="button">保存</button>
    </footer>
  </div>
</div>

<script src="{{ url_for('static', filename='js/community.js') }}"></script>
</body>
</html>

{% endblock %}