{% extends "base.html" %} {% block title %}プロフィール{% endblock %} {% block
content %}
<head>
  <link
    rel="stylesheet"
    href="{{url_for('static', filename='css/profile.css')}}"
  />
</head>
<main>
  <div class="profile-section">
    <img
      src="{{url_for('static', filename='media/user' + user_icon)}}"
      alt="プロフィール画像"
      class="profile-image"
    />

    <div class="profile-info">
      <div class="profile-header">
        <div>
          <h1 class="profile-name">{{user_name}}</h1>
          <div class="profile-tags">
            {% for p in tag %}
            <span class="tag">#{{p}}</span>
            {% endfor %}
          </div>
          <div class="profile-stats">
            <div class="stat">
              フォロワー<span class="stat-number">403</span>
            </div>
            <div class="stat">フォロー<span class="stat-number">219</span></div>

            <div class="rating">
              {% for star in rating_stars %}
              <p>{{star}}</p>

              {% endfor %}
            </div>
          </div>
        </div>
        <div class="profile-actions">
          <a href="{{ url_for('my_page.my_page_top')}}"
            ><button class="action-btn">マイページ</button></a
          >

          <a href="{{ url_for('account.edit_profile', user_name=user_name)}}"
            ><button class="action-btn">編集</button></a
          >
        </div>
      </div>
      <div class="profile-bio">{{introduction}}</div>
    </div>
  </div>

  <div class="content-sections">
    <div class="section">
      <h2 class="section-title">動画</h2>
      {% if videos %} {% for video in user_videos %}
      <a href="{{url_for('lesson_video.video_player', video_id=video.id)}}">
        <div class="video-card">
          <div class="video-thumbnail">
            <img
              src="{{url_for('static', filename='media' + video.thumbnail_path)}}"
              alt=""
            />
          </div>
          <div class="video_info">
            <h3>{{video.video_title}}</h3>
            <p class="video_desc">{{video.video_description_section}}</p>
            <p>再生回数：{{video.view_count}}</p>
            <div>
              <p>#{{video.video_tag}}</p>
              <p class="video_upload_date">
                {{video.video_upload_date.date()}}
              </p>
            </div>
          </div>
        </div>
      </a>
      {% endfor %} {% else %}
      <h3 id="novid_msg">{{novid_msg}}</h3>
      {% endif %}
    </div>

    <div class="section">
      <h2 class="section-title">投稿</h2>
      {% if user_posts == [] %}
      <h3 id="nopost_msg">{{nopost_msg}}</h3>
      {% endif %} {% for post in user_posts %}
      <div class="post-card">
        <div class="post-header">
          <img
            src="{{url_for('static', filename='media/user' + user_icon)}}"
            alt="プロフィール画像"
            class="post-avatar"
          />
          <div class="post-user-info">
            <div class="post-username">{{user_name}}</div>
          </div>
        </div>
        {% if post.post_media != None %}
        <img
          src="{{url_for('static', filename='media/posts/' + post.post_media)}}"
          alt="投稿画像"
          class="post-image"
        />
        {% endif %}
        <div class="post-text">
          <p>{{post.post_text}}</p>
          <br />
          <p class="post_upload_date">{{post.post_date}}</p>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</main>
{% endblock %}
